## 资产

##### 资产字段规定

```
{
    type_name:str          	# AMOUNT or ITEM
    quantity:int            # 数量
    value:int               # 价值
    name:str				# 资产名称
    category:str            # 资产分类（注意不是id）
 	nid:int             	# 资产的唯一标识
    histroy:list            # 历史
	description:str			# 资产描述
    parent:				 	# 唯一 用id标识
    children:list			# 用id标识
    owner:					# 用用户名表示
    department:				# 部门
    status:         		# 状态
    start_time:				# 录入时间
    quit_time:				# 清退时间
    prop:str				# 自定义属性
}
```

`status`共五种：

```python
    status_choices = [('IDLE', '闲置'),
                      ('IN_USE', '使用'),
                      ('IN_MAINTAIN', '维护'),
                      ('RETIRED', '清退'),
                      ('DELETED', '删除')]
```



##### api/asset/list GET

获取资产列表


return: 

```json
data = [{
    'nid': int,
    'name': str,
    'quantity': int,
    'value': int,
    'category': str,
    'type_name': str,
    'description': str,
    'parent': str,
    'child': str,
    'status': str,
    'owner': str,
    'department': str,
    'start_time': timestamp
},...]
code = 200: success
```



##### api/asset/add POST

para:

- type_name, quantity, value, name, category, description

return:

```python
code = 
	    200: success
        201: parameter error
        400: Validation Error when saving asset
```



##### api/asset/edit POST

para:

- nid, name, description

return: 

```python
return: code =
        200: success
        201: parameter error
        202：no such asset
```
##### api/asset/query POST

para:

 name: str,

 category: str,  // 资产分类的名称

 description: str

字段为空代表匹配所有。category精确匹配，name和description包含匹配。返回一个list，方式同api/asset/list.

返回数据同 asset/list.

---

## 资产类型

##### api/asset/category/add POST

增加资产类型

para:

- name(str), parent_id(int)

return: 

```json
code =
	200: success
    201: parameter error
```

##### api/asset/category/delete POST

删除资产类型

para:

- id(int)

return: 

```json
code =
	200: success
    201: parameter error
```

##### api/asset/category/edit POST

修改资产类型名

para:

- name(str), id(int)

return: 

```json
code =
	200: success
    201: parameter error
```

